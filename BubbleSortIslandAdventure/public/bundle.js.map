{"version":3,"file":"bundle.js","sources":["../src/index.js"],"sourcesContent":["import { html, render } from 'lighterhtml';\nconst FLOOR_SIZE = 5;\nconst ANIMATION_DURATION = 2000;\nconst ACTIONS = {\n  HIDE_UNTIL_CLICK: 'HIDE_UNTIL_CLICK',\n  START_GAME: 'START_GAME',\n  SWAP_ISLANDS: 'SWAP_ISLANDS',\n  WAIT: 'WAIT',\n  NEXT_PAGE: 'NEXT_PAGE',\n  GAME_OVER: 'GAME_OVER',\n};\nconst elCanvas = window.canvas;\nconst elDialog = window.elDialog;\n//\n// Game State\nconst state = window.state = {\n  isDialogOpen: false,\n  didWin: true,\n  storyIndex: 0,\n  swapIndexes: [],\n  islands: [],\n  goal: [],\n  visitors: [],\n  //\n  // Handle's events, updates state, and triggers re-render\n  handleEvent(event) {\n    if (event.preventDefault) {\n      event.preventDefault();\n    }\n    // console.log('event', event.type, event);\n    initLevel(this, event);\n    handleClick(this, event);\n    updateIslandPositions(this, event);\n    updateDidWin(this, event);\n    // Render the new state\n    // console.log('rendering state');\n    renderLevel(elCanvas, this);\n    renderDialog(elDialog, this);\n  },\n  //\n  // Returns the the index for the island above.\n  // User clicks the bottom and the island swaps with the one above it.\n  getPairedIndex(index) {\n    const { x, y } = indexToPoint(index);\n    return pointToIndex({x, y: y-1});\n  },\n  //\n  // Returns the visitor on island at index.\n  // or null if no visitor is on that island.\n  getVisitorAt(index) {\n    const { x, y } = indexToPoint(index);\n    return this.visitors.find((visitor) => visitor.x === x && visitor.y === y);\n  },\n  //\n  // Helper to trigger a re-render.\n  triggerRender() {\n    this.handleEvent({\n      type: 'render',\n    });\n  },\n};\n//\n// Story Phases!\nconst story = window.story = [\n  {\n    title: 'Islander:',\n    side: 'good',\n    paragraphs: [\n      'Oh! Hi there! I was just putting together my first island. 😁',\n      'It\\'s not much now, but I think it has potental 🥰',\n      'Please, take a look around, but be careful not to poke it too hard, the dirt is still soft.',\n    ],\n    next: {\n      label: 'Let me take a better look',\n      action:  ACTIONS.HIDE_UNTIL_CLICK,\n    },\n  },{\n    title: 'Trouble Maker:',\n    side: 'evil',\n    paragraphs: [\n      'You poked me!',\n      'You look smart, so I\\'ll poke your brain!',\n      'Watch as I destroy this pitiful island!',\n      'Bubble sort everything back into place, if you can!',\n    ],\n    next: {\n      label: 'I\\'m on it!',\n      action: ACTIONS.START_GAME,\n    },\n  },{\n    title: 'Islander:',\n    side: 'good',\n    paragraphs: [\n      'You did it! 🤩🥳',\n      'I knew you could do it!',\n    ],\n    next: {\n      label: 'Thank you!',\n      action: ACTIONS.GAME_OVER,\n    },\n  },\n];\n\n\n\n//\n// Views/Render functions\n//\n\n//\n// An island is a sprite with optional child sprite.\nconst renderIsland = ({sprite}, visitor, key) => html`<div\n  class=\"island\"\n  data-idx=${key}\n  sprite=${sprite}\n  onclick=${state}\n  action=${ACTIONS.SWAP_ISLANDS}\n  style=${''}\n  >\n  ${!visitor ? '' : renderVisitor(visitor)}\n</div>`;\n//\n// Visitor is just a sprite.\nconst renderVisitor = ({sprite, spritesheet}) => html`<div class=\"visitor\"\n  spritesheet=${spritesheet}\n  sprite=${sprite}>\n</div>`;\n\n//\n// Render the level\nfunction renderLevel(elm, state) {\n  const { islands, didWin, visitors } = state;\n\n  // Render the islands\n  render(elm, () => html`<div>\n  ${islands.map((island, idx) => {\n    const visitor = state.getVisitorAt(idx);\n    return renderIsland(island, visitor, idx);\n  })}</div>`);\n}\n//\n// Dialog Box\nfunction renderDialog(elm, state) {\n  const { storyIndex } = state;\n  const { title, paragraphs, next, side } = story[storyIndex];\n  const classList = ['nes-dialog', 'is-rounded'];\n  if ('evil' === side) {\n    classList.push('is-dark');\n  }\n  else {\n    classList.push('is-light');\n  }\n\n  render(elm, () => html`<div class=${classList.join(' ')}>\n    <form method=\"dialog\" ontransitionend=${this}>\n      <p class=\"title\">${title}</p>\n      ${paragraphs.map(txt => html`<p>${txt}</p>`)}\n      <menu class=\"dialog-menu\">\n        <button onclick=${state} action=${next.action} class=\"btn nes-btn is-primary\">${next.label}</button>\n      </menu>\n    </form>\n  </div>`);\n}\n\n\n//\n// Actions/Game Logic\n//\n\n\n//\n// updates the position of islands in the state.islands array.\n// Swaps the two islands in state.swapIndexes.\nfunction updateIslandPositions(state, event) {\n  const { type } = event;\n  const { swapIndexes, islands } = state;\n  if (swapIndexes.length !== 2) { return state; }\n  const bottomIsland = islands[swapIndexes[0]];\n  const topIsland = islands[swapIndexes[1]];\n\n  // Swap the islands!\n  islands.splice(swapIndexes[1], 1, bottomIsland);\n  islands.splice(swapIndexes[0], 1, topIsland);\n  // Swap the Visitors x,y positions\n  const bottomVisitor = state.getVisitorAt(swapIndexes[0]);\n  const topVisitor = state.getVisitorAt(swapIndexes[1]);\n  if (bottomVisitor) {\n    Object.assign(bottomVisitor, indexToPoint(swapIndexes[1]));\n  }\n  if (topVisitor) {\n    Object.assign(topVisitor, indexToPoint(swapIndexes[0]));\n  }\n  // clear the indexes\n  swapIndexes.length = 0;\n  return state;\n}\n//\n// Check if the user won!\nfunction updateDidWin(state, event) {\n  const { islands, goal, visitors, didWin } = state;\n  state.didWin = goal.every(({x, y, spritesheet, sprite}) => {\n    return visitors.find((visitor) => {\n      return visitor.x === x\n        && visitor.y === y\n        && visitor.spritesheet === spritesheet\n        && visitor.sprite === sprite;\n    });\n  });\n\n  // If we are switching to win for the first time.\n  if (!didWin && state.didWin) {\n    // ugly hack, we need to wait until after render to trigger the animation.\n    setTimeout(() => {\n      animationWin(state);\n    });\n  }\n  return state;\n}\n\n//\n// Loads a new level\nfunction initLevel(state, event) {\n  const { type, level } = event;\n  if ('initLevel' !== type) { return state; }\n  const { mobs } = level;\n  // Mob original position is the solution to the puzzle.\n  state.goal = JSON.parse(JSON.stringify(mobs));\n  // Mobs become visitors that are shuffled on the y-axis\n  state.visitors = JSON.parse(JSON.stringify(mobs));\n  // Islands use random sprites.\n  state.islands = Array(FLOOR_SIZE*FLOOR_SIZE).fill().map(() => {\n    return {\n      spritesheet: 'island',\n      sprite: 0|Math.random()*6,\n    };\n  });\n  return state;\n}\n\nfunction handleClick(state, event) {\n  const { lastAction, visitors, isDialogOpen, isAnimating } = state;\n  const { currentTarget, type } = event;\n  // Only respond to clicks when not animating.\n  if ('click' !== type || isAnimating) { return state; }\n  const nextAction = currentTarget.getAttribute('action');\n\n  // If we are hiding until a click happend\n  if (lastAction === ACTIONS.HIDE_UNTIL_CLICK\n    && nextAction !== ACTIONS.HIDE_UNTIL_CLICK) {\n    // Show the next dialog\n    animationShowDialog(state).then(() => {\n      state.lastAction = ACTIONS.WAIT;\n      // re-render with the new state.\n      state.triggerRender();\n    });\n    return state;\n  }\n\n  // We switch our action to the new one.\n  state.lastAction = nextAction;\n\n  if(nextAction === ACTIONS.HIDE_UNTIL_CLICK) {\n    // Animate closed and then update the state.\n    animationHideDialog(state).then(() => {\n      // re-render with the new state.\n      state.triggerRender();\n    });\n  }\n\n  if (nextAction === ACTIONS.START_GAME) {\n    Promise.all([\n      animationHideDialog(state),\n      animationExplode(state),\n    ]).then(() => {\n      state.visitors = randomizeVisitors(visitors);\n      // re-render with the new state.\n      state.triggerRender();\n    });\n  }\n\n  if (nextAction === ACTIONS.GAME_OVER) {\n    // just close the dialog so the user can see the island.\n    animationHideDialog(state);\n  }\n\n  if (nextAction === ACTIONS.SWAP_ISLANDS && !isDialogOpen) {\n    const bottomIndex = parseInt(currentTarget.dataset.idx, 10);\n    const topIndex = state.getPairedIndex(bottomIndex);\n    // Skip invalid pairs (like the top islands)\n    if (topIndex < 0) { return state; }\n    // Start the animation.\n    animationSwap(state, [bottomIndex, topIndex]).then(() => {\n      state.swapIndexes = [bottomIndex, topIndex];\n      // re-render with the new state.\n      state.triggerRender();\n    });\n  }\n\n  return state;\n}\n\n\n//\n// Randomizes the visitors along the y-axis only.\nfunction randomizeVisitors(visitors) {\n  // Create a random list of indexes for each column.\n  const randomIndexes = Array(FLOOR_SIZE).fill().map(() => {\n    return Array(FLOOR_SIZE).fill().map((_, i) => i).sort(() => 0|Math.random()*3-2);\n  });\n  // Give each visitor a new random y position from the random list.\n  return visitors.map((visitor) => {\n    visitor.y = randomIndexes[visitor.x].pop();\n    return visitor;\n  });\n}\n\n\n\n//\n// Animations\n// Island Swap\nfunction animationSwap(state, [bottomIndex, topIndex]) {\n  console.log('animationSwap');\n  markStartAnimation(state);\n  return Promise.all([\n    anime({\n      targets: `.island:nth-child(${topIndex+1})`,\n      delay: 0,\n      duration: ANIMATION_DURATION,\n      easing: 'easeOutExpo',\n      keyframes: [\n        {translateX: '0%', translateY: '0%', 'z-index': 110},\n        {translateX: '50%', translateY: '50%'},\n        {translateX: '0%', translateY: '100%', 'z-index': 100},\n      ],\n    }).finished,\n    anime({\n      targets: `.island:nth-child(${bottomIndex+1})`,\n      duration: ANIMATION_DURATION,\n      easing: 'easeOutCirc',\n      delay: 0,\n      keyframes: [\n        {translateX: '0%', translateY: '0%', 'z-index': 110},\n        {translateX: '-50%', translateY: '-50%'},\n        {translateX: '0%', translateY: '-100%', 'z-index': 100},\n      ],\n    }).finished,\n  ]).then(() => {\n    // remove the styles anime added for the animation. State will have the island in the new position on re-render.\n    document.querySelectorAll(`.island:nth-child(${topIndex+1}), .island:nth-child(${bottomIndex+1}`).forEach(elm => elm.removeAttribute('style'));\n    markEndAnimation(state);\n  });\n}\n//\n// explode the world into islands!\nfunction animationExplode(state) {\n  markStartAnimation(state);\n\n  const promiseList = [{x:200, y:108}, {x:154, y:31}, {x:108, y:-46}, {x:62, y:-123}, {x:16, y:-200}].map((start, index) => {\n    const targets = Array(FLOOR_SIZE)\n      .fill()\n      .map((_, i) => index*FLOOR_SIZE+i)\n      .reduce((result, num) => `${result}, .island:nth-child(${num+1})`, '').substring(1);\n    return anime({\n      targets,\n      duration: ANIMATION_DURATION,\n      translateX: [anime.stagger('-54%', { start: start.x }), 0],\n      translateY: [anime.stagger('23%', { start: start.y }), 0],\n      easing: 'easeInOutSine',\n    }).finished;\n  });\n  return Promise.all(promiseList).then(() => {\n    markEndAnimation(state);\n    document.querySelectorAll('.island').forEach(elm => elm.style.transform = '');\n  });\n}\n//\n// Bring all the islands back together animation\nfunction animationRestore(state) {\n  markStartAnimation(state);\n  const promiseList = [{x:200, y:108}, {x:154, y:31}, {x:108, y:-46}, {x:62, y:-123}, {x:16, y:-200}].map((start, index) => {\n    const targets = Array(FLOOR_SIZE)\n      .fill()\n      .map((_, i) => index*FLOOR_SIZE+i)\n      .reduce((result, num) => `${result}, .island:nth-child(${num+1})`, '').substring(1);\n    return anime({\n      targets,\n      duration: ANIMATION_DURATION,\n      translateX: [0, anime.stagger('-54%', { start: start.x })],\n      translateY: [0, anime.stagger('23%', { start: start.y })],\n      easing: 'easeInOutSine',\n    }).finished;\n  });\n  return Promise.all(promiseList).then(() => {\n    markEndAnimation(state);\n  });\n}\n\nfunction animationWin(state) {\n  markStartAnimation(state);\n  const promiseList = [\n    animationRestore(state),\n    animationShowDialog(state),\n  ];\n  return Promise.all(promiseList).then(() => {\n    markEndAnimation(state);\n  });\n}\n\n//\n// Dialog Animations\nfunction animationHideDialog() {\n  markStartAnimation(state);\n  console.log('animationHideDialog START');\n  return anime({\n    targets: '#elDialog',\n    easing: 'easeInQuart',\n    duration: ANIMATION_DURATION/2,\n    translateX: [0, '-80vw'],\n  }).finished.then(() => {\n    console.log('animationHideDialog END');\n    markEndAnimation(state);\n    state.isDialogOpen = false;\n    state.storyIndex += 1;\n  });\n}\nfunction animationShowDialog() {\n  markStartAnimation(state);\n  state.isDialogOpen = true;\n  return anime({\n    targets: '#elDialog',\n    duration: ANIMATION_DURATION,\n    easing: 'easeInQuart',\n    translateX: ['-80vw', 0],\n  }).finished.then(() => {\n    markEndAnimation(state);\n  });\n}\n\n\n//\n// Utils\nfunction indexToPoint(index) {\n  return {\n    x: 0| index % FLOOR_SIZE,\n    y: 0| index / FLOOR_SIZE,\n  };\n}\nfunction pointToIndex({x, y}) {\n  return x + (y * FLOOR_SIZE);\n}\n\nfunction markStartAnimation(state) {\n  state.isAnimating = true;\n  document.body.classList.add('is-animating');\n}\nfunction markEndAnimation(state) {\n  state.isAnimating = false;\n  document.body.classList.remove('is-animating');\n}\n\n//\n// Define some levels\nconst levels = [{\n  mobs: [\n    {x: 4, y: 0, spritesheet: 'img-water', sprite: 3},\n    {x: 3, y: 0, spritesheet: 'img-water', sprite: 5},\n    {x: 4, y: 1, spritesheet: 'img-water', sprite: 1},\n    {x: 3, y: 1, spritesheet: 'img-water', sprite: 0},\n    {x: 4, y: 2, spritesheet: 'img-water', sprite: 4},\n    {x: 3, y: 2, spritesheet: 'img-water', sprite: 2},\n\n    {x: 0, y: 3, spritesheet: 'img-visitor', sprite: 0},\n    {x: 2, y: 0, spritesheet: 'img-visitor', sprite: 1},\n    {x: 1, y: 2, spritesheet: 'img-golem-1', sprite: 'forward'},\n  ],\n}];\n\n//\n// Main\n// Update the CSS vars to match the JS CONSTS\ndocument.body.style.setProperty('--grid--total-columns', FLOOR_SIZE);\ndocument.body.style.setProperty('--grid--total-rows', FLOOR_SIZE);\n\n// Trigger loading the frist level\nstate.handleEvent({\n  type: 'initLevel',\n  level: levels[0],\n});\nPromise.all([animationRestore(state), animationShowDialog(state)]).then(() => {\n  state.triggerRender();\n});\n"],"names":["FLOOR_SIZE","ANIMATION_DURATION","ACTIONS","HIDE_UNTIL_CLICK","START_GAME","SWAP_ISLANDS","WAIT","NEXT_PAGE","GAME_OVER","elCanvas","window","canvas","elDialog","state","isDialogOpen","didWin","storyIndex","swapIndexes","islands","goal","visitors","handleEvent","event","preventDefault","initLevel","handleClick","updateIslandPositions","updateDidWin","renderLevel","renderDialog","getPairedIndex","index","indexToPoint","x","y","pointToIndex","getVisitorAt","find","visitor","triggerRender","type","story","title","side","paragraphs","next","label","action","renderIsland","key","sprite","html","renderVisitor","spritesheet","elm","render","map","island","idx","classList","push","join","txt","length","bottomIsland","topIsland","splice","bottomVisitor","topVisitor","Object","assign","every","setTimeout","animationWin","level","mobs","JSON","parse","stringify","Array","fill","Math","random","lastAction","isAnimating","currentTarget","nextAction","getAttribute","animationShowDialog","then","animationHideDialog","Promise","all","animationExplode","randomizeVisitors","bottomIndex","parseInt","dataset","topIndex","animationSwap","randomIndexes","_","i","sort","pop","console","log","markStartAnimation","anime","targets","delay","duration","easing","keyframes","translateX","translateY","finished","document","querySelectorAll","forEach","removeAttribute","markEndAnimation","promiseList","start","reduce","result","num","substring","stagger","style","transform","animationRestore","body","add","remove","levels","setProperty"],"mappings":"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"}